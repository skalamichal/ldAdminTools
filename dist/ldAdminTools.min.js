!function(a){"use strict";a.module("ldAdminTools",["ui.bootstrap","RecursionHelper"]),a.module("ldAdminTools").directive("ldFilterDropdown",[function(){return{restrict:"EA",scope:{selectedFilter:"=",filters:"="},template:function(){var a='<div class="ld-filter-dropdown" dropdown>';return a+='<a style="cursor: pointer" dropdown-toggle role="button">{{ selectedFilter.name }} <i class="fa fa-caret-down"></i></a>',a+='<ul class="dropdown-menu">',a+='<li ng-repeat="filter in filters"><a ng-click="selectFilter(filter);">{{ filter.name }}</a></li>',a+="</ul>",a+="</div>"},link:function(a){a.selectFilter=function(b){a.selectedFilter=b},a.selectFilter(a.filters[0])}}}]),a.module("ldAdminTools").controller("ldSidebarMenuController",["$scope","$parse","$attrs",function(){function b(b){a.forEach(d,function(c,d){d>b&&a.forEach(c,function(a){a.closeMenu()})})}var c=this,d=[];this.registerMenu=function(b){var e=b.level;a.isUndefined(d[e])&&(d[e]=[]),d[e].push(b),b.menuLevelStyle="nav-"+c.getLevelAsString(e)+"-level"},this.openMenu=function(c){a.forEach(d[c.level],function(a){a.$id!==c.$id&&a.closeMenu()},this),b(c.level)},this.getLevelAsString=function(a){return 1===a?"first":2===a?"second":3===a?"third":""}}]).directive("ldSidebarMenu",[function(){return{restrict:"E",scope:{data:"=",options:"=?ldMenuOptions",level:"=?level"},replace:!0,controller:"ldSidebarMenuController",templateUrl:"partials/ldmenu-wrap.html",link:function(a,b,c,d){a.level=a.level||1,a.menuLevelStyle="nav-"+d.getLevelAsString(a.level)+"-level"}}}]).directive("ldMenu",["RecursionHelper",function(b){return{restrict:"E",scope:{data:"=",level:"="},require:["^ldSidebarMenu","?^ldSubmenuItem"],replace:!0,templateUrl:"partials/ldmenu-wrap.html",compile:function(c){return b.compile(c,function(b,c,d,e){var f=e[0],g=e[1];f.registerMenu(b),a.isDefined(g)&&g.registerMenu(b),b.closeMenu=function(){a.isDefined(g)&&g.closeMenu()}})}}}]).directive("ldMenuItem",[function(){return{restrict:"E",scope:{item:"=data"},templateUrl:"partials/ldmenuitem.html",replace:!0}}]).directive("ldSubmenuItem",[function(){return{restrict:"E",scope:{item:"=data",level:"="},controller:["$scope",function(a){this.registerMenu=function(b){a.menu=b},this.closeMenu=function(){a.collapsed||(a.collapsed=!0)}}],require:"^ldSidebarMenu",templateUrl:"partials/ldsubmenuitem.html",replace:!0,link:function(b,c,d,e){b.collapsed=!0,b.toggle=function(){b.collapsed=!b.collapsed,!b.collapsed&&a.isDefined(b.menu)&&e.openMenu(b.menu)},b.collapsedClass=function(){return b.collapsed?"fa-angle-left":"fa-angle-down"},b.isCollapsed=function(){return b.collapsed}}}}]),a.module("ldAdminTools").directive("ldResize",["$window",function(b){return{restrict:"EA",scope:{ldOnResize:"&"},link:function(c){var d=a.element(b),e=c.ldOnResize();c.size={width:-1,height:-1},c.updateSize=function(){c.size.width=b.innerWidth>0?b.innerWidth:this.screen.width,c.size.height=b.innerHeight>0?b.innerHeight:this.screen.height},c.$watchCollection("size",function(a){e(a.width,a.height)}),d.bind("resize",function(){c.$apply(function(){c.updateSize()})}),c.updateSize()}}}]),a.module("ldAdminTools").constant("ldSlideLeftConfig",{isAnimated:!0,isCloseable:!1}).controller("ldSlideLeftController",["$scope","$transition","$attrs","$parse","ldSlideLeftConfig",function(b,c,d,e,f){function g(a){function b(){k===d&&(k=void 0)}var d=c(n.$element,a);return k&&k.cancel(),k=d,d.then(b,b),d}function h(){n.$element.css("left","0px"),n.$element.removeClass("ld-sliding-left"),n.$element.addClass("ld-slide in")}function i(){n.$element.css("left","-"+t+"px"),n.$element.removeClass("ld-sliding-left in"),n.$element.addClass("ld-slide")}function j(){o.isOpen?n.expand():n.slide()}var k,l,m,n=this,o=b.$new(),p=a.noop,q=e(d.ldSlideLeft),r=q.assign,s=a.noop,t=0,u=!0;o.isAnimated=a.isDefined(d.ldAnimated)?b.$eval(d.ldAnimated):f.isAnimated,o.isCloseable=a.isDefined(d.ldCloseable)?b.$eval(d.ldCloseable):f.isCloseable,o.isOpen=b.$eval(d.ldSlideLeft),this.init=function(c){n.$element=c,t=n.$element[0].offsetWidth,a.isDefined(d.ldAnimated)&&(l=e(d.ldAnimated),p=l.assign,b.$watch(l,function(a){o.isAnimated=!!a})),a.isDefined(d.ldCloseable)&&(m=e(d.ldCloseable),s=m.assign,b.$watch(m,function(a){o.isCloseable=!!a})),b.$watch(d.ldSlideLeft,function(a){o.isOpen=!!a})},this.toggle=function(a){o.isOpen=arguments.length?!!a:!o.isOpen,r(b,o.isOpen)},this.expand=function(){!o.isAnimated||u?(u=!1,h()):(n.$element.removeClass("ld-slide").addClass("ld-sliding-left"),g({left:"0px"}).then(h))},this.slide=function(){if(u||!o.isAnimated)u=!1,i(),n.$element.css({left:-t+"px"});else{n.$element.css({left:"0px"});{n.$element[0].offsetLeft}n.$element.removeClass("ld-slide in").addClass("ld-sliding-left"),g({left:-t+"px"}).then(i)}},o.$watch("isOpen",function(a){o.isCloseable||a||(o.isOpen=!0,r(b,o.isOpen)),j()}),o.$watch("isCloseable",function(a){a||o.isOpen||(o.isOpen=!0,r(b,o.isOpen)),j()})}]).directive("ldSlideLeft",[function(){return{restrict:"A",controller:"ldSlideLeftController",link:function(a,b,c,d){d.init(b)}}}]).directive("ldSlideToggle",[function(){return{require:"?^ldSlideLeft",link:function(a,b,c,d){function e(){a.$apply(function(){d.toggle()})}d&&(b.on("click",e),a.$on("$destroy",function(){b.off("click",e)}))}}}]),a.module("ldAdminTools").directive("ldStFilter",function(){return{restrict:"A",require:"^stTable",link:function(a,b,c,d){a.$watch(c.ldStFilter,function(a){a&&d.search(a.value,a.key)})}}}),a.module("ldAdminTools").controller("ldTableController",["$scope","$parse","$filter","$attrs",function(b,c,d,e){function f(a){return h=g=a.length,[].concat(a)}var g,h,i,j=e.ldTable,k=c(j),l=k.assign,m={},n={},o=d("filter"),p=d("orderBy"),q=f(k(b));this.setSearchFilter=function(b,c){var d=a.isDefined(c)?c:"$";m[d]=b,a.isUndefined(b)&&delete m[d],this.applyFilters()},this.removeSearchFilter=function(b){var c=a.isDefined(b)?b:"$";delete m[c],this.applyFilters()},this.setOrderByFilter=function(a,b){n.predicate=a,n.reverse=b,this.applyFilters()},this.clearOrderByFilter=function(){n={},this.applyFilters()},this.setDisplayRange=function(a,b){i={from:a,rows:b},this.applyFilters()},this.clearDisplayRange=function(){i=void 0,this.applyFilters()},this.clearFilters=function(){n={},m={},i=void 0,this.applyFilters()},this.applyFilters=function(){var c=o(q,m),d=p(c,n.predicate,n.reverse);h=d.length,a.isDefined(i)&&(d=d.slice(i.from,i.from+i.rows)),l(b,d)},this.getOrderByFilters=function(){return n},this.getSearchFilters=function(){return m},this.getFilteredRows=function(){return h},this.getTotalRows=function(){return g}}]).directive("ldTable",[function(){return{restrict:"A",controller:"ldTableController",link:function(){}}}]).directive("ldTableSearch",["$timeout",function(a){return{restrict:"A",require:"^ldTable",scope:{predicate:"=?ldTableSearch"},link:function(b,c,d,e){function f(){null!==g&&a.cancel(g),g=a(function(){e.setSearchFilter(c[0].value||"",b.predicate),g=null},100)}var g;b.$watch("predicate",function(a,b){a!==b&&(e.removeSearchFilter(b),e.setSearchFilter(c[0].value||"",a))}),c.on("input",f),b.$on("$destroy",function(){c.off("input",f)})}}}]).directive("ldTableSort",["$parse",function(){return{restrict:"A",require:"^ldTable",link:function(b,c,d,e){function f(){c.removeClass(i).removeClass(j),m===k.ASCENT?c.addClass(i):m===k.DESCENT&&c.addClass(j)}function g(){m===k.NONE?e.clearOrderByFilter():e.setOrderByFilter(l,m===k.DESCENT)}function h(){m++,m>k.DESCENT&&(m=k.NONE),b.$apply(g)}if(!a.isUndefined(d.ldTableSort)){var i="ld-table-sort-ascent",j="ld-table-sort-descent",k=Object.freeze({NONE:0,ASCENT:1,DESCENT:2}),l=d.ldTableSort,m=k.NONE;a.isDefined(d.ldTableSortDefault)&&(m="reverse"===d.ldTableSortDefault?k.DESCENT:k.ASCENT),b.$watch(e.getOrderByFilters,function(b){(a.isUndefined(b.predicate)||b.predicate!==l)&&(m=k.NONE),f()},!0),c.on("click",h),b.$on("$destroy",function(){c.off("click",h)}),m!==k.NONE&&g()}}}}]).directive("ldTableFilter",[function(){return{restrict:"A",require:"^ldTable",scope:{predicate:"=ldTableFilter"},link:function(b,c,d,e){b.$watch("predicate",function(b){a.isDefined(b)&&(a.isDefined(b.value)?e.setSearchFilter(b.value,b.predicate):e.removeSearchFilter(b.predicate))},!0)}}}]).directive("ldTablePagination",[function(){return{restrict:"EA",require:"^ldTable",scope:{itemsPerPage:"=?",maxSize:"=?",isVisible:"=?"},template:'<div class="ld-table-pagination"><pagination class="ld-pagination" ng-show="__numPages > 1 && isVisible" num-pages="__numPages" ng-model="currentPage" max-size="maxSize" total-items="totalItems" items-per-page="itemsPerPage" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination></div>',link:function(a,b,c,d){function e(b){a.currentPage=b,d.setDisplayRange((b-1)*a.itemsPerPage,a.itemsPerPage)}a.totalItems=d.getFilteredRows(),a.itemsPerPage=a.itemsPerPage||10,a.maxSize=a.maxSize||null,a.isVisible=a.isVisible||!0,a.$watch("currentPage",function(a,b){a!==b&&e(a)}),a.$watch(d.getFilteredRows,function(b){a.totalItems=b,e(1)}),e(1)}}}]),a.module("ldAdminTools").run(["$templateCache",function(a){a.put("partials/ldmenu-wrap.html",'<ul class=nav ng-class=menuLevelStyle><li ng-repeat="item in data"><ld-menu-item ng-if=!item.submenu data=item></ld-menu-item><ld-submenu-item ng-if=item.submenu data=item level=level></ld-submenu-item></li></ul>'),a.put("partials/ldmenuitem.html",'<a class=ld-menuitem ng-href={{item.url}} ld-slide-toggle><i ng-if="item.icon.length > 0" class="fa fa-fw {{item.icon}}"></i> {{ item.text }} <span class=badge ng-if="item.badge && item.badge() > 0">{{ item.badge() }}</span></a>'),a.put("partials/ldsubmenuitem.html",'<div><a class=ld-menuitem ng-href={{item.url}} ng-click=toggle()><i ng-if="item.icon.length > 0" class="fa fa-fw {{item.icon}}"></i> {{ item.text }} <span class=badge ng-if="item.badge && item.badge() > 0">{{ item.badge() }}</span> <span class="fa ld-right" ng-class=collapsedClass()></span></a><ld-menu collapse=isCollapsed() data=item.submenu level="level + 1"></ld-menu></div>')}])}(angular);
//# sourceMappingURL=ldAdminTools.min.map