!function(a){"use strict";a.module("ldAdminTools",["ui.bootstrap","RecursionHelper","LocalStorageModule"]),a.module("ldAdminTools").directive("ldCheckbox",function(){return{template:'<input type="checkbox" ng-change="onChanged()" ng-model="checked">',restrict:"E",scope:{checked:"=?",indeterminate:"=?",onchanged:"&?"},link:function(a,b){a.onChanged=function(){a.indeterminate&&(a.indeterminate=!1,a.checked=!1),a.onchanged()(a.checked)},a.$watch("indeterminate",function(a){a=!!a,b.find("input").prop("indeterminate",a)})}}}),a.module("ldAdminTools").directive("ldFilterDropdown",[function(){return{restrict:"EA",scope:{selectedFilter:"=",filters:"="},templateUrl:"partials/ldfilterdropdown.html",link:function(b){b.isEmpty=!1,b.selectFilter=function(a){b.selectedFilter=a},a.isDefined(b.filters)&&b.filters.length>0&&b.selectFilter(b.filters[0])}}}]),a.module("ldAdminTools").controller("ldSidebarMenuController",["$scope","$parse","$attrs",function(){function b(b){a.forEach(d,function(c,d){d>b&&a.forEach(c,function(a){a.closeMenu()})})}var c=this,d=[];this.registerMenu=function(b){var e=b.level;a.isUndefined(d[e])&&(d[e]=[]),d[e].push(b),b.menuLevelStyle="nav-"+c.getLevelAsString(e)+"-level"},this.openMenu=function(c){a.forEach(d[c.level],function(a){a.$id!==c.$id&&a.closeMenu()},this),b(c.level)},this.getLevelAsString=function(a){return 1===a?"first":2===a?"second":3===a?"third":""}}]).directive("ldSidebarMenu",[function(){return{restrict:"E",scope:{data:"=",options:"=?ldMenuOptions",level:"=?level"},replace:!0,controller:"ldSidebarMenuController",templateUrl:"partials/ldmenu-wrap.html",link:function(a,b,c,d){a.level=a.level||1,a.menuLevelStyle="nav-"+d.getLevelAsString(a.level)+"-level"}}}]).directive("ldMenu",["RecursionHelper",function(b){return{restrict:"E",scope:{data:"=",level:"="},require:["^ldSidebarMenu","?^ldSubmenuItem"],replace:!0,templateUrl:"partials/ldmenu-wrap.html",compile:function(c){return b.compile(c,function(b,c,d,e){var f=e[0],g=e[1];f.registerMenu(b),a.isDefined(g)&&g.registerMenu(b),b.closeMenu=function(){a.isDefined(g)&&g.closeMenu()}})}}}]).directive("ldMenuItem",[function(){return{restrict:"E",scope:{item:"=data"},templateUrl:"partials/ldmenuitem.html",replace:!0}}]).directive("ldSubmenuItem",[function(){return{restrict:"E",scope:{item:"=data",level:"="},controller:["$scope",function(a){this.registerMenu=function(b){a.menu=b},this.closeMenu=function(){a.collapsed||(a.collapsed=!0)}}],require:"^ldSidebarMenu",templateUrl:"partials/ldsubmenuitem.html",replace:!0,link:function(b,c,d,e){b.collapsed=!0,b.toggle=function(){b.collapsed=!b.collapsed,!b.collapsed&&a.isDefined(b.menu)&&e.openMenu(b.menu)},b.collapsedClass=function(){return b.collapsed?"fa-angle-left":"fa-angle-down"},b.isCollapsed=function(){return b.collapsed}}}}]),a.module("ldAdminTools").directive("ldResize",["$window",function(b){return{restrict:"EA",scope:{ldOnResize:"&"},link:function(c){var d=a.element(b),e=c.ldOnResize();c.size={width:-1,height:-1},c.updateSize=function(){c.size.width=b.innerWidth>0?b.innerWidth:this.screen.width,c.size.height=b.innerHeight>0?b.innerHeight:this.screen.height},c.$watchCollection("size",function(a){e(a.width,a.height)}),d.bind("resize",function(){c.$apply(function(){c.updateSize()})}),c.updateSize()}}}]),a.module("ldAdminTools").constant("ldSlideLeftConfig",{isAnimated:!0,isCloseable:!1}).controller("ldSlideLeftController",["$scope","$transition","$attrs","$parse","ldSlideLeftConfig",function(b,c,d,e,f){function g(a){function b(){k===d&&(k=void 0)}var d=c(n.$element,a);return k&&k.cancel(),k=d,d.then(b,b),d}function h(){n.$element.css("left","0px"),n.$element.removeClass("ld-sliding-left"),n.$element.addClass("ld-slide in")}function i(){n.$element.css("left","-"+t+"px"),n.$element.removeClass("ld-sliding-left in"),n.$element.addClass("ld-slide")}function j(){o.isOpen?n.expand():n.slide()}var k,l,m,n=this,o=b.$new(),p=a.noop,q=e(d.ldSlideLeft),r=q.assign,s=a.noop,t=0,u=!0;o.isAnimated=a.isDefined(d.ldAnimated)?b.$eval(d.ldAnimated):f.isAnimated,o.isCloseable=a.isDefined(d.ldCloseable)?b.$eval(d.ldCloseable):f.isCloseable,o.isOpen=b.$eval(d.ldSlideLeft),this.init=function(c){n.$element=c,t=n.$element[0].offsetWidth,a.isDefined(d.ldAnimated)&&(l=e(d.ldAnimated),p=l.assign,b.$watch(l,function(a){o.isAnimated=!!a})),a.isDefined(d.ldCloseable)&&(m=e(d.ldCloseable),s=m.assign,b.$watch(m,function(a){o.isCloseable=!!a})),b.$watch(d.ldSlideLeft,function(a){o.isOpen=!!a})},this.toggle=function(a){o.isOpen=arguments.length?!!a:!o.isOpen,r(b,o.isOpen)},this.expand=function(){!o.isAnimated||u?(u=!1,h()):(n.$element.removeClass("ld-slide").addClass("ld-sliding-left"),g({left:"0px"}).then(h))},this.slide=function(){if(u||!o.isAnimated)u=!1,i(),n.$element.css({left:-t+"px"});else{n.$element.css({left:"0px"});{n.$element[0].offsetLeft}n.$element.removeClass("ld-slide in").addClass("ld-sliding-left"),g({left:-t+"px"}).then(i)}},o.$watch("isOpen",function(a){o.isCloseable||a||(o.isOpen=!0,r(b,o.isOpen)),j()}),o.$watch("isCloseable",function(a){a||o.isOpen||(o.isOpen=!0,r(b,o.isOpen)),j()})}]).directive("ldSlideLeft",[function(){return{restrict:"A",controller:"ldSlideLeftController",link:function(a,b,c,d){d.init(b)}}}]).directive("ldSlideToggle",[function(){return{require:"?^ldSlideLeft",link:function(a,b,c,d){function e(){a.$apply(function(){d.toggle()})}d&&(b.on("click",e),a.$on("$destroy",function(){b.off("click",e)}))}}}]),a.module("ldAdminTools").controller("ldTableController",["$scope","$parse","$filter","$attrs","ldFilterService",function(b,c,d,e,f){function g(a){return k=j=a.length,[].concat(a)}function h(a){r=g(a),q.filterUpdated()}function i(){var a=1>w?1:Math.ceil(k/w);return Math.max(a||0,1)}this.TABLE_UPDATED="ldTableUpdated";var j,k,l=e.ldTable,m=c(l),n=m.assign,o=a.isDefined(e.ldFilter)?e.ldFilter:"ld-"+Math.round(15e4*Math.random()),p=d("ldPaging"),q=this;a.isUndefined(m(b))&&n(b,[]);var r=g(m(b)),s=e.ldTableSource;if(a.isDefined(s)){var t=c(s);r=g(t(b)),b.$watch(function(){return t(b)},function(a,b){a!==b&&h(a)},!0)}var u=r,v=1,w=r.length,x=1;b.$on(f.FILTER_UPDATED,a.bind(this,function(a,b){b===o&&this.filterUpdated()})),a.isUndefined(e.ldFilter)&&b.$on("$destroy",function(){f.removeFilter(o)}),this.getFilter=function(){return o},this.setupPaging=function(a,b){w=a,v=b||1,x=i(),this.applyPaging()},this.clearPaging=function(){w=r.length,v=1,x=1,this.applyPaging()},this.setPage=function(a){v!==a&&a>0&&x>=a&&(v=a),this.applyPaging()},this.setSearchFilter=function(b,c){var d=b;a.isDefined(c)&&c.length>0&&(d={},d[c]=b),f.addFilterFilterCriterion(o,d)},this.removeSearchFilter=function(a){f.removeFilterFilterCriterion(o,a)},this.clearSearchFilter=function(){f.clearFilterFilter(o)},this.setOrderByFilter=function(a,b){f.addOrderByFilterCriterion(o,a,b)},this.clearOrderByFilter=function(){f.clearOrderByFilter(o)},this.clearFilters=function(){f.clearFilterFilter(o),f.clearOrderByFilter(o),w=r.length},this.filterUpdated=function(){u=f.applyFilter(o,r),k=u.length,v=1,x=i(),this.applyPaging()},this.applyPaging=function(){var a=u;x>1&&(a=p(a,v,w)),n(b,a),b.$broadcast(this.TABLE_UPDATED)},this.getOrderByFilters=function(){return f.getFilter(o).orderBy},this.getSearchFilters=function(){return f.getFilter(o).filter},this.getFilteredRows=function(){return k},this.getTotalRows=function(){return j},this.getCurrentPage=function(){return v},this.getRowsPerPage=function(){return w},this.getTotalPages=function(){return x}}]).directive("ldTable",[function(){return{restrict:"A",controller:"ldTableController",link:function(){}}}]),a.module("ldAdminTools").directive("ldTableFilter",["$parse",function(b){return{restrict:"A",require:"^ldTable",link:function(c,d,e,f){var g=b(e.ldTableFilter);c.$watch(g,function(b){a.isDefined(b)&&(a.isDefined(b.clear)&&(0===b.clear.length?f.clearSearchFilter():a.forEach(b.clear,function(a){f.removeSearchFilter(a)})),a.isDefined(b.filters)&&f.setSearchFilter(b.filters))},!0)}}}]),a.module("ldAdminTools").constant("ldTableInfoConfig",{textDefault:"{0} - {1} of {2} Items"}).directive("ldTableInfo",["ldTableInfoConfig",function(a){return{restrict:"EA",require:"^ldTable",templateUrl:"partials/ldtableinfo.html",scope:{text:"@"},link:function(b,c,d,e){function f(){var a=e.getCurrentPage(),c=e.getRowsPerPage(),d=e.getFilteredRows(),f=(a-1)*c+1,h=Math.min(f-1+c,d),i=g.replace("{0}",f);i=i.replace("{1}",h),i=i.replace("{2}",d),b.infoText=i}var g=b.text||a.textDefault;b.$watch("text",function(a){g=a,f()}),b.$on(e.TABLE_UPDATED,function(){f()}),f()}}}]),a.module("ldAdminTools").constant("ldTableNavigationConfig",{showPreviousButtonDefault:!0,showNextButtonDefault:!0}).directive("ldTableNavigation",["ldTableNavigationConfig",function(a){return{restrict:"EA",require:"^ldTable",templateUrl:"partials/ldtablenavigation.html",scope:{showPreviousButton:"=?",showNextButton:"=?"},link:function(b,c,d,e){function f(){var a=e.getCurrentPage();b.disablePreviousButtonClass=1>=a?"disabled":"",b.disableNextButtonClass=a>=e.getTotalPages()?"disabled":""}b.disablePreviousButtonClass="",b.disableNextButtonClass="",b.showPreviousButton=b.showPreviousButton||a.showPreviousButtonDefault,b.showNextButton=b.showNextButton||a.showNextButtonDefault,b.$on(e.TABLE_UPDATED,function(){f()}),b.previousPage=function(){e.setPage(e.getCurrentPage()-1)},b.nextPage=function(){e.setPage(e.getCurrentPage()+1)}}}}]),a.module("ldAdminTools").constant("ldTableNavigationDropdownConfig",{firstPageTextDefault:"First Page",lastPageTextDefault:"Last Page",pageTextDefault:"Page {0}",previousPageTextDefault:"Previous Page",nextPageTextDefault:"Next Page"}).directive("ldTableNavigationDropdown",["ldTableNavigationDropdownConfig",function(a){return{restrict:"EA",require:"^ldTable",templateUrl:"partials/ldtablenavigationdropdown.html",scope:{description:"=",firstPageText:"@",lastPageText:"@",pageText:"@",previousPageText:"@",nextPageText:"@"},link:function(b,c,d,e){function f(){var a=e.getTotalPages(),c=e.getCurrentPage();b.firstPageClass=a>1&&c>1?"":"disabled",b.lastPageClass=a>1&&a>c?"":"disabled",b.previousPageClass=c>1?"":"disabled",b.nextPageClass=a>c?"":"disabled"}function g(a,b){var c={page:a,text:i.replace("{0}",a),active:a===b};return c}function h(){var a=e.getCurrentPage(),c=Math.max(a-2,1),d=Math.min(a+2,e.getTotalPages());if(!(e.getTotalPages()<5)){for(var f=[],h=c;d>=h;h++){var i=g(h,a);f.push(i)}b.pages=f}}b.firstPageText=b.firstPageText||a.firstPageTextDefault,b.lastPageText=b.lastPageText||a.lastPageTextDefault,b.previousPageText=b.previousPageText||a.previousPageTextDefault,b.nextPageText=b.nextPageText||a.nextPageTextDefault;var i=b.pageText||a.pageTextDefault;b.firstPage=b.firstPageText,b.lastPage=b.lastPageText,b.previousPage=b.previousPageText,b.nextPage=b.nextPageText,b.pages=[],b.gotoPage=function(a){e.getCurrentPage()!==a&&e.setPage(a)},b.$on(e.TABLE_UPDATED,function(){b.totalPages=e.getTotalPages(),b.currentPage=e.getCurrentPage(),f(),h()})}}}]),a.module("ldAdminTools").directive("ldTablePageRows",["$parse",function(a){return{restrict:"A",require:"^ldTable",link:function(b,c,d,e){var f=a(d.ldTablePageRows);b.$watch(f,function(a){e.setupPaging(a,1)})}}}]),a.module("ldAdminTools").directive("ldTablePagination",[function(){return{restrict:"EA",require:"^ldTable",scope:{maxSize:"=?",isVisible:"=?"},templateUrl:"partials/ldtablepagination.html",link:function(a,b,c,d){function e(b){a.currentPage=b,d.getCurrentPage()!==b&&d.setPage(b)}a.totalItems=d.getFilteredRows(),a.itemsPerPage=d.getRowsPerPage(),a.maxSize=a.maxSize||null,a.isVisible=a.isVisible||!0,a.$watch("currentPage",function(a,b){a!==b&&e(a)}),a.$on(d.TABLE_UPDATED,function(){a.totalItems=d.getFilteredRows(),a.itemsPerPage=d.getRowsPerPage(),e(d.getCurrentPage())})}}}]),a.module("ldAdminTools").directive("ldTableSearch",["$timeout",function(a){return{restrict:"A",require:["^ldTable","ngModel"],scope:{predicate:"=?ldTableSearch",model:"=ngModel"},link:function(b,c,d,e){function f(){null!==g&&a.cancel(g),g=a(function(){h.setSearchFilter(b.model||"",b.predicate),g=null},200)}var g,h=e[0];b.$watch("predicate",function(a,c){a!==c&&(h.removeSearchFilter(c),h.setSearchFilter(b.model||"",a))}),b.$watch("model",f)}}}]),a.module("ldAdminTools").directive("ldTableSort",[function(){return{restrict:"A",require:"^ldTable",link:function(b,c,d,e){function f(){c.removeClass(i).removeClass(j),m===k.ASCENT?c.addClass(i):m===k.DESCENT&&c.addClass(j)}function g(){m===k.NONE?e.clearOrderByFilter():e.setOrderByFilter(l,m===k.DESCENT)}function h(){m++,m>k.DESCENT&&(m=k.NONE),b.$apply(g)}if(!a.isUndefined(d.ldTableSort)){var i="ld-table-sort-ascent",j="ld-table-sort-descent",k=Object.freeze({NONE:0,ASCENT:1,DESCENT:2}),l=d.ldTableSort,m=k.NONE;a.isDefined(d.ldTableSortDefault)&&(m="reverse"===d.ldTableSortDefault?k.DESCENT:k.ASCENT),b.$watch(e.getOrderByFilters,function(b){(a.isUndefined(b)||a.isUndefined(b.criterion)||b.criterion!==l)&&(m=k.NONE),f()},!0),c.on("click",h),b.$on("$destroy",function(){c.off("click",h)}),m!==k.NONE&&g()}}}}]),a.module("ldAdminTools").filter("ldPaging",function(){return function(b,c,d){if(!a.isArray(b))return b;var e=(c-1)*d,f=e+d;return b.slice(e,f)}}),a.module("ldAdminTools").service("ldFilterService",["$rootScope","$filter","localStorageService",function(b,c,d){function e(b,c){return a.isUndefined(c)?b:g(b,c)}function f(b,c){return a.isUndefined(c)?b:h(b,c.criterion,c.reverse)}var g=c("filter"),h=c("orderBy"),i={};return{FILTER_REMOVED:"ldFilterRemoved",FILTER_UPDATED:"ldFilterUpdated",getFilter:function(b){return a.isUndefined(i[b])&&(i[b]={}),i[b]},removeFilter:function(a){delete i[a],b.$broadcast(this.FILTER_REMOVED,a)},applyFilter:function(b,c){if(!a.isArray(c))return c;var d=this.getFilter(b),g=c;return g=e(g,d.filter),g=f(g,d.orderBy)},addFilterFilterCriterion:function(c,d){var e=this.getFilter(c);a.isUndefined(e.filter)&&(e.filter={}),a.isString(d)?a.extend(e.filter,{$:d}):a.isObject(d)&&a.extend(e.filter,d),b.$broadcast(this.FILTER_UPDATED,c,e)},removeFilterFilterCriterion:function(c,d){var e=this.getFilter(c);a.isUndefined(e.filter)||(a.isString(d)?delete e.filter[d]:a.isArray(d)?a.forEach(d,function(a){delete e.filter[a]}):a.isObject(d)&&a.forEach(d,function(a,b){delete e.filter[b]}),b.$broadcast(this.FILTER_UPDATED,c,e))},clearFilterFilter:function(a){var c=this.getFilter(a);delete c.filter,b.$broadcast(this.FILTER_UPDATED,a,c)},addOrderByFilterCriterion:function(c,d,e){var f=this.getFilter(c),g=!!e;a.isUndefined(f.orderBy)&&(f.orderBy={}),a.isString(d)&&(f.orderBy={criterion:d,reverse:g}),b.$broadcast(this.FILTER_UPDATED,c,f)},removeOrderByFilterCriterion:function(c,d){var e=this.getFilter(c);a.isUndefined(e)||(a.isString(d)&&(e.orderBy={}),b.$broadcast(this.FILTER_UPDATED,c,e))},clearOrderByFilter:function(a){var c=this.getFilter(a);delete c.orderBy,b.$broadcast(this.FILTER_UPDATED,a,c)},forceUpdate:function(a){var c=this.getFilter(a);b.$broadcast(this.FILTER_UPDATED,a,c)},forceUpdateAll:function(){a.forEach(i,function(a,c){b.$broadcast(this.FILTER_UPDATED,c,a)},this)},storeFilters:function(){d.isSupported&&d.set("filters",a.toJson(i))},loadFilters:function(){d.isSupported&&(i=a.fromJson(d.get("filters"))),a.isDefined(i)&&null===i&&(i={})}}}]),a.module("ldAdminTools").run(["$templateCache",function(a){a.put("partials/ldfilterdropdown.html",'<div class=ld-filter-dropdown dropdown><a style=cursor:pointer dropdown-toggle role=button>{{ selectedFilter.name }} <i class="fa fa-caret-down"></i></a><ul class=dropdown-menu><li ng-repeat="filter in filters" ng-class="filter.divider ? \'divider\' : \'\'"><a ng-if=!filter.divider ng-click=selectFilter(filter);>{{ filter.name }}</a></li></ul></div>'),a.put("partials/ldmenu-wrap.html",'<ul class=nav ng-class=menuLevelStyle><li ng-repeat="item in data"><ld-menu-item ng-if=!item.submenu data=item></ld-menu-item><ld-submenu-item ng-if=item.submenu data=item level=level></ld-submenu-item></li></ul>'),a.put("partials/ldmenuitem.html",'<a class=ld-menuitem ng-href={{item.url}} ld-slide-toggle><i ng-if="item.icon.length > 0" class="fa fa-fw {{item.icon}}"></i> {{ item.text }} <span class=badge ng-if="item.badge && item.badge() > 0">{{ item.badge() }}</span></a>'),a.put("partials/ldsubmenuitem.html",'<div><a class=ld-menuitem ng-href={{item.url}} ng-click=toggle()><i ng-if="item.icon.length > 0" class="fa fa-fw {{item.icon}}"></i> {{ item.text }} <span class=badge ng-if="item.badge && item.badge() > 0">{{ item.badge() }}</span> <span class="fa ld-right" ng-class=collapsedClass()></span></a><ld-menu collapse=isCollapsed() data=item.submenu level="level + 1"></ld-menu></div>'),a.put("partials/ldtableinfo.html","<span class=ld-table-info>{{ infoText }}</span>"),a.put("partials/ldtablenavigation.html",'<div class=ld-table-navigation><a href="" class="btn btn-link ld-table-navigation-btn" ng-if=showPreviousButton ng-class=disablePreviousButtonClass ng-click=previousPage()><i class="fa fa-fw fa-chevron-left fa-lg"></i></a> <a href="" class="btn btn-link ld-table-navigation-btn" ng-if=showNextButton ng-class=disableNextButtonClass ng-click=nextPage()><i class="fa fa-fw fa-chevron-right fa-lg"></i></a></div>'),a.put("partials/ldtablenavigationdropdown.html",'<div class=ld-table-navigation-dropdown dropdown><a href="" dropdown-toggle style=cursor:pointer role=button>{{ description }} {{ currentPage }} of {{ totalPages }} <i class="fa fa-fw fa-caret-down"></i></a><ul class="dropdown-menu dropdown-menu-right"><li class=dropdown-header>{{ header }}</li><li ng-class=firstPageClass><a href="" ng-click=gotoPage(1)><i class="fa fa-fw fa-angle-double-left fa-lg"></i>{{ firstPage }}</a></li><li ng-class=previousPageClass><a href="" ng-click="gotoPage(currentPage - 1)"><i class="fa fa-fw fa-angle-left fa-lg"></i>{{ previousPage }}</a></li><li ng-repeat="page in pages" ng-class="page.active ? \'divider\' : \'\'"><a href="" ng-if=!page.active ng-click=gotoPage(page.page)><i class="fa fa-fw fa-lg" ng-class="page.active ? \'fa-caret-right\' : \'\'"></i>{{ page.text }}</a></li><li ng-class=nextPageClass><a href="" ng-click="gotoPage(currentPage + 1)"><i class="fa fa-fw fa-angle-right fa-lg"></i>{{ nextPage }}</a></li><li ng-class=lastPageClass><a href="" ng-click=gotoPage(totalPages)><i class="fa fa-fw fa-angle-double-right fa-lg"></i>{{ lastPage }}</a></li></ul></div>'),a.put("partials/ldtablepagination.html",'<div class=ld-table-pagination><pagination class=ld-pagination ng-show="__numPages > 1 && isVisible" num-pages=__numPages ng-model=currentPage max-size=maxSize total-items=totalItems items-per-page=itemsPerPage boundary-links=true previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></pagination></div>')}])}(angular);
//# sourceMappingURL=ldAdminTools.min.map